/*
 * NUMEROS.h
 *
 *  Created on: 14/12/2023
 *      Author: marti
 */

#ifndef NUMEROS_H_
#define NUMEROS_H_
#include "banner.h"
#include "ledsrgb.h"
#include "colores.h"

# define BASE_ADDRESS_BANNER 0xC5800000



const int lavando[8][7]= {	{0x10,0x10,0x10,0x10,0x10,0x10,0x1E},
							{0x1F,0x11,0x11,0x1F,0x11,0x11,0x11},
							{0x11,0x11,0x11,0x11,0x11,0x0A,0x04},
							{0x1F,0x11,0x11,0x1F,0x11,0x11,0x11},
							{0x1D,0x15,0x15,0x15,0x15,0x15,0x17},
							{0x18,0x14,0x12,0x11,0x12,0x14,0x18},
							{0x0E,0x11,0x11,0x11,0x11,0x11,0x0E},
							{0x00,0x00,0x00,0x00,0x00,0x00,0x00}};

const int secando[8][7]= {	{0x0E,0x10,0x10,0x0E,0x01,0x01,0x0E},
							{0x1E,0x10,0x10,0x1C,0x10,0x10,0x1E},
							{0x0E,0x11,0x10,0x10,0x10,0x11,0x0E},
							{0x1F,0x11,0x11,0x1F,0x11,0x11,0x11},
							{0x1D,0x15,0x15,0x15,0x15,0x15,0x17},
							{0x18,0x14,0x12,0x11,0x12,0x14,0x18},
							{0x0E,0x11,0x11,0x11,0x11,0x11,0x0E},
							{0x00,0x00,0x00,0x00,0x00,0x00,0x00}};

int i;


void BANNER_enviarD(Xuint32 col, Xuint32 fil,Xuint32 dato){

	//Antes de escribir, hay que comprobar siempre que la FIFO no esté llena mediante la función
	//BANNER_mWriteFIFOFull ( baseaddr ).
	while(BANNER_mWriteFIFOFull(XPAR_BANNER_0_BASEADDR)){}
	Xuint32 data;
	//Para generar el dato a enviar, hay que concatenar los valores de fila, columna y dato según las
	//especificaciones dadas en usr_logic. Para ello puede utilizarse la siguiente instrucción:
	//Data =(( fila & 0 xff ) << (31 -7)) + (( columna & 0 xff ) << (31 -15)) + (( dato & 0 xff ) << (31 -23));
	data = ((fil & 0xff)<< (31-7)) + ((col & 0xff) << (31-15)) + ((dato & 0xff)<< (31-23));
	//xil_printf("data %08x\n",data);
	BANNER_mWriteToFIFO(XPAR_BANNER_0_BASEADDR,0,data);

}

void BANNER_inicializa(){
	Xuint32 dato,fila,columna,data;
	dato=0x0;
	for(fila = 0; fila < 7; fila++){
			for(columna = 0; columna < 8; columna++){
				data = (( fila & 0xff ) << (31 -7)) +  (( columna & 0xff ) << (31 -15)) + (( dato & 0xff ) << (31 -23));
				BANNER_mWriteToFIFO( XPAR_BANNER_0_BASEADDR , 0, data );
			}
	}
}


void msg(const int word[8][7]){

	int i, j;
		for(i = 0; i < 8; i++){
			for(j = 0; j < 7; j++){
				BANNER_enviarD(i,j,word[i][j]);
			}
		}
}


#endif /* NUMEROS_H_ */
